<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üêç Snake | CutIt.sbs ‚ú¶ your vibe. your code.</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Antonio:wght@500&display=swap');
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Antonio', sans-serif;
    }
    body {
      background: black;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas {
      border: 2px solid white;
      background-color: #000;
    }
    #startPopup, #gameOverPopup {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #startPopup button, #gameOverPopup button {
      margin-top: 20px;
      padding: 10px 20px;
      background: white;
      color: black;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
    }
    #score {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 1.2rem;
      color: #fff;
    }
    .watermark {
      position: absolute;
      bottom: 10px;
      opacity: 0.1;
      font-size: 0.9rem;
      pointer-events: none;
    }
    .emoji {
      position: absolute;
      animation: float 5s linear infinite;
      font-size: 2rem;
      z-index: 0;
    }
    @keyframes float {
      0% { transform: translateY(100vh); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }
  </style>
</head>
<body>

<div id="score">Score: 0</div>
<canvas id="game" width="300" height="300"></canvas>

<div class="watermark">CutIt.sbs ‚ú¶ your vibe. your code.</div>

<div id="startPopup">
  <h1>üêç Snake</h1>
  <p>Grow or die trying. Nostalgia, but neon.<br>Swipe or use arrow keys.</p>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="gameOverPopup" style="display:none;">
  <h2>Game Over</h2>
  <p id="finalScore"></p>
  <p>üì∏ Take a screenshot & tag us:<br>
    IG: @cutit.sbs<br>X: @cutitsbs</p>
  <button onclick="location.href='https://cutit.sbs/games'">üè† Home</button>
  <button onclick="location.reload()">üîÅ Play Again</button>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const box = 20;
let snake = [{ x: 5, y: 5 }];
let direction = null;
let food = {};
let score = 0;
let interval;
let started = false;

function draw() {
  ctx.fillStyle = "#000";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  ctx.fillStyle = "#00FF00";
  snake.forEach(part => ctx.fillRect(part.x * box, part.y * box, box, box));

  // Draw food
  ctx.fillStyle = "#FF00FF";
  ctx.fillRect(food.x * box, food.y * box, box, box);
}

function update() {
  const head = { ...snake[0] };
  switch (direction) {
    case "LEFT": head.x--; break;
    case "UP": head.y--; break;
    case "RIGHT": head.x++; break;
    case "DOWN": head.y++; break;
  }

  // Wall or self collision
  if (
    head.x < 0 || head.x >= canvas.width / box ||
    head.y < 0 || head.y >= canvas.height / box ||
    snake.some(part => part.x === head.x && part.y === head.y)
  ) return endGame();

  snake.unshift(head);
  if (head.x === food.x && head.y === food.y) {
    score++;
    document.getElementById('score').innerText = "Score: " + score;
    placeFood();
  } else {
    snake.pop();
  }

  draw();
}

function placeFood() {
  food = {
    x: Math.floor(Math.random() * (canvas.width / box)),
    y: Math.floor(Math.random() * (canvas.height / box))
  };
  if (snake.some(part => part.x === food.x && part.y === food.y)) {
    placeFood();
  }
}

function startGame() {
  document.getElementById("startPopup").style.display = "none";
  snake = [{ x: 5, y: 5 }];
  direction = "RIGHT";
  score = 0;
  document.getElementById('score').innerText = "Score: 0";
  placeFood();
  if (interval) clearInterval(interval);
  interval = setInterval(update, 150);
  started = true;
}

function endGame() {
  clearInterval(interval);
  document.getElementById("finalScore").innerText = `Your score: ${score}`;
  document.getElementById("gameOverPopup").style.display = "flex";
}

document.addEventListener("keydown", e => {
  if (!started) return;
  const d = e.key;
  if (d === "ArrowLeft" && direction !== "RIGHT") direction = "LEFT";
  if (d === "ArrowUp" && direction !== "DOWN") direction = "UP";
  if (d === "ArrowRight" && direction !== "LEFT") direction = "RIGHT";
  if (d === "ArrowDown" && direction !== "UP") direction = "DOWN";
});

let touchStartX = 0, touchStartY = 0;
canvas.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
});
canvas.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (Math.abs(dx) > Math.abs(dy)) {
    if (dx > 0 && direction !== "LEFT") direction = "RIGHT";
    else if (dx < 0 && direction !== "RIGHT") direction = "LEFT";
  } else {
    if (dy > 0 && direction !== "UP") direction = "DOWN";
    else if (dy < 0 && direction !== "DOWN") direction = "UP";
  }
});

// Floating emojis
setInterval(() => {
  const e = document.createElement('div');
  e.className = 'emoji';
  e.textContent = ['üü¢','üêç','üåü','üí•','üïπÔ∏è'][Math.floor(Math.random() * 5)];
  e.style.left = Math.random() * window.innerWidth + 'px';
  document.body.appendChild(e);
  setTimeout(() => e.remove(), 5000);
}, 1500);
</script>
</body>
</html>
