<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cutit’s Cosmic Arcade 🚀✨</title>
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Antonio:wght@400;700&display=swap">
  <style>
    /* RESET & GLOBAL */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      width: 100%; height: 100%; overflow: hidden;
      background: linear-gradient(135deg, #f5eaff, #b6f0ff);
      font-family: 'Antonio', sans-serif;
      color: #222;
    }

    /* GAME CONTAINER */
    #game-container {
      position: relative; width: 100%; height: 100%;
    }

    /* SCOREBOARD */
    #scoreboard {
      position: absolute; top: 10px; left: 50%;
      transform: translateX(-50%);
      display: flex; gap: 24px;
      background: rgba(255,255,255,0.3); backdrop-filter: blur(12px);
      border-radius: 8px; padding: 8px 16px;
      font-size: 1.2rem; z-index: 10;
    }
    #scoreboard div { display: flex; align-items: center; gap: 8px; }

    /* LEVEL BANNER */
    #level-banner {
      position: absolute; top: 60px; left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.3); backdrop-filter: blur(12px);
      border-radius: 8px; padding: 8px 16px;
      font-size: 1.5rem; opacity: 0; transition: opacity 0.5s;
      z-index: 10;
    }
    #level-banner.show { opacity: 1; }

    /* WATERMARK */
    #watermark {
      position: absolute; bottom: 10px; right: 10px;
      font-size: 1rem; opacity: 0.3; z-index: 10;
    }

    /* ENTITIES & EFFECTS */
    .alien, .boss {
      position: absolute; cursor: pointer; pointer-events: auto;
    }
    .explosion {
      position: absolute; font-size: 2rem;
      animation: pop 0.6s forwards;
    }
    @keyframes pop {
      from { opacity: 1; transform: scale(1) translate(-50%, -50%); }
      to   { opacity: 0; transform: scale(2) translate(-50%, -50%); }
    }

    /* MODALS */
    .modal {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.4); backdrop-filter: blur(12px);
      padding: 24px 32px; border-radius: 12px;
      text-align: center; display: none; z-index: 20;
      width: 80%; max-width: 400px;
    }
    .modal.active { display: block; }
    .modal h2 { margin-bottom: 16px; font-size: 2rem; }
    .modal p  { margin-bottom: 16px; font-size: 1.1rem; }
    .modal button {
      margin: 8px; padding: 8px 16px;
      font-size: 1rem; border: none; border-radius: 8px;
      background: #ffc4e1; cursor: pointer;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      #scoreboard { font-size: 1rem; padding: 6px 12px; }
      #level-banner { top: 50px; font-size: 1.2rem; }
      .modal { padding: 16px; }
      .modal h2 { font-size: 1.5rem; }
      .modal p { font-size: 1rem; }
    }
  </style>
</head>
<body>

  <div id="game-container"></div>

  <div id="scoreboard">
    <div>Score 💯: <span id="score">0</span></div>
    <div>Best 🏆: <span id="best">0</span></div>
  </div>

  <div id="level-banner">🌟 LEVEL 1 – Moon Base 🌕 🌟</div>
  <div id="watermark">CutIt.sbs ✦ your vibe. your code</div>

  <!-- PRE-GAME INFO -->
  <div class="modal" id="preGameModal">
    <h2>Welcome to Cutit’s Cosmic Arcade 🚀✨</h2>
    <p>Destroy aliens, level up, and vibe through space!</p>
    <button id="startBtn">Start</button>
  </div>

  <!-- GAME OVER -->
  <div class="modal" id="gameOverModal">
    <h2>💥 Game Over!</h2>
    <p>Your Score: <span id="finalScore">0</span></p>
    <button id="restartBtn1">Play Again</button>
    <button id="homeBtn1">Home</button>
  </div>

  <!-- WIN SCREEN -->
  <div class="modal" id="winModal">
    <h2>👑 You Slayed the Vibe Overlord! 👑</h2>
    <p>CutIt.sbs ✦ your vibe. your code</p>
    <button id="restartBtn2">Play Again</button>
    <button id="homeBtn2">Home</button>
  </div>

  <script>
    // STATE & STORAGE
    let level = 0, score = 0,
        best = localStorage.getItem('cutitBest') || 0,
        aliens = [], animId;

    const container    = document.getElementById('game-container');
    const scoreEl      = document.getElementById('score');
    const bestEl       = document.getElementById('best');
    const finalScoreEl = document.getElementById('finalScore');
    const levelBanner  = document.getElementById('level-banner');

    const preGameModal    = document.getElementById('preGameModal');
    const gameOverModal   = document.getElementById('gameOverModal');
    const winModal        = document.getElementById('winModal');

    bestEl.textContent = best;

    // LEVEL CONFIG
    const LEVELS = [
      { name:"Moon Base 🌕",    count:5,  speed:2,   zigzag:false, shootBack:false },
      { name:"Asteroid Rush 🪨",count:10, speed:3,   zigzag:false, shootBack:false },
      { name:"Saturn Drift 🪐", count:15, speed:2.5, zigzag:false, shootBack:true  },
      { name:"Cosmic Chaos 🌌", count:20, speed:4,   zigzag:true,  shootBack:false },
      { name:"Vibe Overlord 👾", boss:true }
    ];

    // UTILS: show/hide modals
    function showModal(m){ m.classList.add('active'); }
    function hideModal(m){ m.classList.remove('active'); }

    // PRE-GAME
    document.getElementById('startBtn').onclick = () => {
      hideModal(preGameModal);
      restartGame();
    };

    // HOME BUTTONS
    document.getElementById('homeBtn1').onclick =
    document.getElementById('homeBtn2').onclick = () => {
      window.location.href = 'https://cutit.sbs';
    };

    // RESTART BUTTONS
    document.getElementById('restartBtn1').onclick = () => {
      hideModal(gameOverModal);
      restartGame();
    };
    document.getElementById('restartBtn2').onclick = () => {
      hideModal(winModal);
      restartGame();
    };

    // RESTART & INIT
    function restartGame(){
      cancelAnimationFrame(animId);
      level = 0; score = 0; updateScore();
      startLevel();
      animId = requestAnimationFrame(update);
    }

    function updateScore(){
      scoreEl.textContent = score;
    }

    // START LEVEL
    function startLevel(){
      // cleanup
      aliens.forEach(a=> a.el.remove());
      aliens = [];
      container.querySelectorAll('.explosion, .boss').forEach(e=> e.remove());
      hideModal(gameOverModal);
      hideModal(winModal);

      const cfg = LEVELS[level];
      showBanner(cfg.name);
      if(cfg.boss) spawnBoss();
      else for(let i=0;i<cfg.count;i++) spawnAlien(cfg);
    }

    function showBanner(name){
      levelBanner.textContent = `🌟 LEVEL ${level+1} – ${name} 🌟`;
      levelBanner.classList.add('show');
      setTimeout(()=> levelBanner.classList.remove('show'), 2000);
    }

    // SPAWN ALIEN
    function spawnAlien(cfg){
      const ns="http://www.w3.org/2000/svg";
      const svg=document.createElementNS(ns,'svg');
      svg.setAttribute('viewBox','0 0 64 64');
      svg.classList.add('alien');
      svg.innerHTML=`
        <circle cx="32" cy="32" r="24" fill="#FFC4E1"/>
        <circle cx="24" cy="28" r="4" fill="#000"/>
        <circle cx="40" cy="28" r="4" fill="#000"/>
        <path d="M20,44 Q32,54 44,44" stroke="#000" stroke-width="2" fill="none"/>
      `;
      container.appendChild(svg);

      const x0 = Math.random()*(window.innerWidth-64), y0 = -64;
      aliens.push({ el: svg, x: x0, y: y0, cfg });

      svg.onclick = e => {
        e.stopPropagation();
        score += 10; updateScore();
        createExplosion(e.pageX, e.pageY);
        svg.remove();
        aliens = aliens.filter(a => a.el !== svg);
      };
    }

    // SPAWN BOSS
    function spawnBoss(){
      const d = document.createElement('div');
      d.classList.add('boss');
      d.innerHTML=`
<pre>╔══ 💜 VIBE OVERLORD 👾 ══╗
║ ✨ Mood: Chaotic 🌀      ║
║ 💥 Attack: Triple Beam  ║
║ 🧠 “You vibin’?” 😎     ║
╚══════════════════════════╝</pre>`;
      container.appendChild(d);
      d.style.left = (window.innerWidth/2 - 150) + 'px';
      d.style.top  = '80px';
      d.onclick = e => {
        createExplosion(e.pageX, e.pageY);
        winGame();
      };
    }

    // EXPLOSION EFFECT
    function createExplosion(x,y){
      const emojis = ['💥','🔥','✨','🧨'];
      const fx = document.createElement('div');
      fx.classList.add('explosion');
      fx.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      fx.style.left = x + 'px';
      fx.style.top  = y + 'px';
      container.appendChild(fx);
      fx.addEventListener('animationend', () => fx.remove());
    }

    // GAME LOOP
    function update(){
      const cfg = LEVELS[level];
      aliens.forEach(a => {
        a.y += cfg.speed;
        if(cfg.zigzag) a.x += 4 * Math.sin(a.y / 20);
        a.el.style.left = a.x + 'px';
        a.el.style.top  = a.y + 'px';
        if(cfg.shootBack && Math.random() < 0.005) shootBack(a.x+32, a.y+64);
        if(a.y > window.innerHeight) endGame();
      });

      if(!cfg.boss && aliens.length === 0){
        level++;
        if(level < LEVELS.length) startLevel();
        else winGame();
      }

      animId = requestAnimationFrame(update);
    }

    // SHOOT BACK
    function shootBack(x,y){
      const b = document.createElement('div');
      b.textContent = '💢'; b.style.position = 'absolute';
      b.style.left = x + 'px'; b.style.top = y + 'px';
      container.appendChild(b);
      let by = y;
      (function move(){
        by += 6; b.style.top = by + 'px';
        if(by < window.innerHeight) requestAnimationFrame(move);
        else b.remove();
      })();
    }

    // END & WIN
    function endGame(){
      cancelAnimationFrame(animId);
      best = Math.max(best, score);
      localStorage.setItem('cutitBest', best);
      bestEl.textContent = best;
      finalScoreEl.textContent = score;
      showModal(gameOverModal);
    }

    function winGame(){
      cancelAnimationFrame(animId);
      localStorage.setItem('cutitBest', Math.max(best, score));
      showModal(winModal);
    }

    // INITIALIZE
    window.onload = () => showModal(preGameModal);
  </script>
</body>
</html>
