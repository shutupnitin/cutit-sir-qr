<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CutIt.sbs Daily Crossword ‚ú¶ your code</title>
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/crosswords-js/dist/crosswords.css" rel="stylesheet">
  <style>
    :root {
      --bg:#000;--text:#fff;--accent:#444;
    }
    .light { --bg:#fff;--text:#000;--accent:#ddd; }
    body{background:var(--bg);color:var(--text);font-family:'Antonio',sans-serif;margin:0;padding:0;}
    .container{max-width:600px;margin:60px auto 20px;padding:0 10px;position:relative;}
    .controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
    .button{border:1px solid var(--text);padding:6px 12px;border-radius:6px;cursor:pointer;background:transparent;color:var(--text);}
    .timer,.best{font-size:1rem;}
    .watermark{text-align:center;color:rgba(255,255,255,0.15);font-size:0.9rem;margin-top:10px;}
    .popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);
      display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;text-align:center;padding:20px;z-index:100;}
    .popup button,a{margin:8px;padding:10px 20px;font-size:1.2rem;border:none;border-radius:6px;cursor:pointer;}
    .popup a{background:#fff;color:#000;text-decoration:none;}
    .leaderboard{margin-top:15px;font-size:0.9rem;}
    .leaderboard li{background:rgba(255,255,255,0.1);padding:6px;margin:4px 0;border-radius:4px;}
  </style>
</head>
<body>
  <div class="container controls">
    <div class="best">Best: <span id="bestTime">--:--</span></div>
    <div class="timer">Time: <span id="timer">00:00</span></div>
    <button class="button mode-toggle" onclick="toggleMode()">üåó Mode</button>
  </div>

  <div id="crossword-container" class="container"></div>
  <div class="watermark">CutIt.sbs ‚ú¶ your vibe. your code</div>

  <div class="popup" id="introPopup">
    <h2>Welcome to Daily Crossword</h2>
    <p>Your minimalist NYT‚Äëstyle puzzle in CutIt theme.<br>Complete it as fast as you can!</p>
    <button onclick="startGame()">Start Puzzle</button>
    <a href="https://cutit.sbs/games">üè† Home</a>
  </div>

  <div class="popup" id="winPopup" style="display:none">
    <h2>üéâ Solved!</h2>
    <p>Your Time: <span id="yourTime">--:--</span></p>
    <p>CutIt.sbs ‚ú¶ your vibe. your code</p>
    <button onclick="restartGame()">Play Again</button>
    <a href="https://cutit.sbs/games">üè† Home</a>
    <div class="leaderboard">
      <strong>üèÜ Today‚Äôs Top Times</strong>
      <ul id="leaderList"></ul>
    </div>
  </div>

  <script src="https://unpkg.com/crosswords-js/dist/crosswords.js"></script>
  <script>
    // Sample puzzle dictionary
    const puzzles = {
      "2025-07-29": {
        width: 15, height: 15,
        acrossClues: [
          { x:1, y:1, clue:"Brand name", answer:"CUTIT" },
          { x:5, y:3, clue:"Your vibe slogan", answer:"VIBE" }
        ],
        downClues: [
          { x:1, y:1, clue:"Your initials", answer:"CV" },
          { x:3, y:2, clue:"User Interface", answer:"UI" }
        ]
      },
      // add more daily puzzles keyed by date
    };

    let controller, timerId, seconds = 0;

    function format(sec) {
      const m = String(Math.floor(sec/60)).padStart(2,'0');
      const s = String(sec%60).padStart(2,'0');
      return m + ':' + s;
    }

    function startTimer(){
      seconds = 0;
      document.getElementById('timer').textContent = "00:00";
      timerId = setInterval(()=>{
        seconds++;
        document.getElementById('timer').textContent = format(seconds);
      },1000);
    }

    function startGame(){
      document.getElementById('introPopup').style.display = 'none';
      const today = new Date().toISOString().slice(0,10);
      const puzzle = puzzles[today] || Object.values(puzzles)[0];
      document.getElementById('bestTime').innerText = getBestTime(today) || '--:--';
      controller = new CrosswordController(puzzle, document.getElementById('crossword-container'));
      controller.onFinish = onSolved;
      startTimer();
    }

    function onSolved(){
      clearInterval(timerId);
      const t = seconds;
      document.getElementById('yourTime').textContent = format(t);
      recordTime(new Date().toISOString().slice(0,10), t);
      showLeaderboard(new Date().toISOString().slice(0,10));
      document.getElementById('winPopup').style.display = 'flex';
    }

    function restartGame(){
      document.getElementById('winPopup').style.display = 'none';
      controller.reset();
      startTimer();
    }

    function toggleMode(){
      document.body.classList.toggle('light');
    }

    function recordTime(dateKey, time){
      const key = 'cutit_lb_' + dateKey;
      const arr = JSON.parse(localStorage.getItem(key) || '[]');
      arr.push(time);
      arr.sort((a,b)=>a-b);
      const top = arr.slice(0,5);
      localStorage.setItem(key, JSON.stringify(top));
    }

    function getBestTime(dateKey){
      const arr = JSON.parse(localStorage.getItem('cutit_lb_' + dateKey) || '[]');
      return arr.length ? format(arr[0]) : null;
    }

    function showLeaderboard(dateKey){
      const arr = JSON.parse(localStorage.getItem('cutit_lb_' + dateKey) || '[]') || [];
      document.getElementById('leaderList').innerHTML =
        arr.map(t => `<li>${format(t)}</li>`).join('');
    }
  </script>
</body>
</html>
