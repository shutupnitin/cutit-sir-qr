<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CutIt Pong üéÆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000;
      --fg: #fff;
      --accent: #00ffcc;
    }

    body {
      margin: 0;
      font-family: 'Antonio', sans-serif;
      background: var(--bg);
      color: var(--fg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      overflow: hidden;
    }

    header, footer {
      text-align: center;
      padding: 1rem;
      font-size: 1.3rem;
      color: var(--accent);
    }

    canvas {
      background: #111;
      display: block;
      margin: 1rem auto;
      border: 2px solid var(--accent);
    }

    #menu {
      text-align: center;
    }

    #menu input {
      padding: 0.5rem;
      margin: 0.3rem;
      border: none;
      font-size: 1rem;
      border-radius: 5px;
      font-family: 'Antonio';
    }

    #menu button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background: var(--accent);
      border: none;
      border-radius: 4px;
      font-family: 'Antonio';
      margin: 1rem;
    }

    #scoreboard {
      font-size: 1.2rem;
      margin-top: 0.5rem;
    }

    #highScore {
      font-size: 1.1rem;
      color: gold;
      animation: flicker 1s infinite alternate;
    }

    @keyframes flicker {
      from { opacity: 1; }
      to { opacity: 0.5; }
    }

    @media (max-width: 600px) {
      canvas {
        width: 90vw;
        height: 50vh;
      }
    }
  </style>
</head>
<body>
  <header>
    CutIt.sbs üèì Pong Challenge
  </header>

  <div id="menu">
    <input id="player1Name" placeholder="Player 1 Name" />
    <input id="player2Name" placeholder="Player 2 Name or leave blank for AI" />
    <button onclick="startGame()">Start Game</button>
  </div>

  <canvas id="pong" width="700" height="400"></canvas>

  <div id="scoreboard">
    <span id="player1Label">P1</span>: <span id="p1Score">0</span> | 
    <span id="player2Label">P2</span>: <span id="p2Score">0</span>
  </div>
  <div id="highScore"></div>

  <footer>
    Made with ‚ù§Ô∏è by CutIt.sbs | <a href="/" style="color: var(--accent); text-decoration: none;">Back to Home</a>
  </footer>

  <script>
    const canvas = document.getElementById('pong');
    const ctx = canvas.getContext('2d');
    const p1Label = document.getElementById('player1Label');
    const p2Label = document.getElementById('player2Label');
    const p1ScoreEl = document.getElementById('p1Score');
    const p2ScoreEl = document.getElementById('p2Score');
    const highScoreEl = document.getElementById('highScore');
    let player1 = '', player2 = '', isAI = false;

    const paddleWidth = 10, paddleHeight = 80;
    let paddle1Y = canvas.height / 2 - paddleHeight / 2;
    let paddle2Y = canvas.height / 2 - paddleHeight / 2;
    let ballX = canvas.width / 2, ballY = canvas.height / 2;
    let ballSpeedX = 4, ballSpeedY = 3;
    let p1Score = 0, p2Score = 0;
    const paddleSpeed = 6;
    let upPressed = false, downPressed = false;
    let wPressed = false, sPressed = false;
    let touchY1 = null, touchY2 = null;
    let playing = false;

    function drawRect(x, y, w, h, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, w, h);
    }

    function drawBall(x, y) {
      ctx.beginPath();
      ctx.arc(x, y, 8, 0, Math.PI * 2);
      ctx.fillStyle = '#fff';
      ctx.fill();
      ctx.closePath();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawRect(0, paddle1Y, paddleWidth, paddleHeight, '#fff');
      drawRect(canvas.width - paddleWidth, paddle2Y, paddleWidth, paddleHeight, '#fff');
      drawBall(ballX, ballY);
    }

    function update() {
      ballX += ballSpeedX;
      ballY += ballSpeedY;

      // Bounce on top/bottom
      if (ballY <= 0 || ballY >= canvas.height) ballSpeedY = -ballSpeedY;

      // Paddle collision
      if (ballX <= paddleWidth) {
        if (ballY > paddle1Y && ballY < paddle1Y + paddleHeight) {
          ballSpeedX = -ballSpeedX;
        } else {
          p2Score++; reset(); 
        }
      }

      if (ballX >= canvas.width - paddleWidth) {
        if (ballY > paddle2Y && ballY < paddle2Y + paddleHeight) {
          ballSpeedX = -ballSpeedX;
        } else {
          p1Score++; reset(); 
        }
      }

      // Move AI paddle
      if (isAI) {
        paddle2Y += (ballY - paddle2Y - paddleHeight / 2) * 0.1;
      }

      // Player 1
      if (wPressed) paddle1Y -= paddleSpeed;
      if (sPressed) paddle1Y += paddleSpeed;

      // Player 2 (if 1v1)
      if (!isAI) {
        if (upPressed) paddle2Y -= paddleSpeed;
        if (downPressed) paddle2Y += paddleSpeed;
      }

      // Clamp paddles
      paddle1Y = Math.max(0, Math.min(canvas.height - paddleHeight, paddle1Y));
      paddle2Y = Math.max(0, Math.min(canvas.height - paddleHeight, paddle2Y));

      p1ScoreEl.textContent = p1Score;
      p2ScoreEl.textContent = p2Score;

      draw();
      requestAnimationFrame(update);
    }

    function reset() {
      ballX = canvas.width / 2;
      ballY = canvas.height / 2;
      ballSpeedX = (Math.random() > 0.5 ? 4 : -4);
      ballSpeedY = (Math.random() > 0.5 ? 3 : -3);
      checkHighScore();
    }

    function startGame() {
      player1 = document.getElementById('player1Name').value || 'Player 1';
      player2 = document.getElementById('player2Name').value || 'AI';
      isAI = player2.toLowerCase() === 'ai';

      p1Label.textContent = player1;
      p2Label.textContent = isAI ? 'AI' : player2;

      document.getElementById('menu').style.display = 'none';
      playing = true;
      update();
    }

    function checkHighScore() {
      const currentHigh = localStorage.getItem('pongHigh') || 0;
      const highHolder = localStorage.getItem('pongHighName') || '';

      const current = Math.max(p1Score, p2Score);
      if (current > currentHigh) {
        highScoreEl.textContent = `üéâ New High Score by ${current === p1Score ? player1 : player2}! (${current})`;
        localStorage.setItem('pongHigh', current);
        localStorage.setItem('pongHighName', current === p1Score ? player1 : player2);
      } else {
        highScoreEl.textContent = `üèÜ High Score: ${highHolder} (${currentHigh})`;
      }
    }

    // Controls
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp') upPressed = true;
      if (e.key === 'ArrowDown') downPressed = true;
      if (e.key === 'w') wPressed = true;
      if (e.key === 's') sPressed = true;
    });

    document.addEventListener('keyup', e => {
      if (e.key === 'ArrowUp') upPressed = false;
      if (e.key === 'ArrowDown') downPressed = false;
      if (e.key === 'w') wPressed = false;
      if (e.key === 's') sPressed = false;
    });

    // Touch support
    canvas.addEventListener('touchmove', e => {
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      const y = touch.clientY - rect.top;

      if (touch.clientX < rect.width / 2) {
        paddle1Y = y - paddleHeight / 2;
      } else {
        if (!isAI) paddle2Y = y - paddleHeight / 2;
      }
    });
  </script>
</body>
</html>
